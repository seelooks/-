<!DOCTYPE html>
<html>
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<link href="/admin/img/fav.png" rel="shortcut icon" type="image/x-icon">
<title>开发平台</title>
<!-- admin lte 必须 -->
<link rel="stylesheet" href="/admin/plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/admin/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/admin/plugins/Ionicons/css/ionicons.min.css">
<link rel="stylesheet" href="/admin/plugins/adminlte/css/AdminLTE.min.css">
<link rel="stylesheet" href="/admin/plugins/adminlte/css/skins/_all-skins.min.css">
<!-- bootstrap table -->
<link rel="stylesheet" href="/admin/plugins/bootstrap-table/bootstrap-table.min.css">
<!-- 加载效果 -->
<link rel="stylesheet" href="/admin/plugins/pace-1.0.2/themes/blue/pace-theme-flash.css">
<!-- 时间选择器 -->
<link rel="stylesheet" href="/admin/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css">
</head>
<!-- bootstrap select  -->
<link rel="stylesheet" href="/admin/plugins/bootstrap-select/css/bootstrap-select.css">
<!-- bootstrap validator -->
<link rel="stylesheet" href="/admin/plugins/bootstrapvalidator/css/bootstrapValidator.min.css">
<link rel="stylesheet" href="/admin/css/base.css">
<!-- 单选复选 -->
<link rel="stylesheet" href="/admin/plugins/iCheck/all.css">
<link rel="stylesheet" href="/admin/plugins/layui/css/layui.css">

<script src="/admin/plugins/jquery/jquery.min.js"></script>
<!--[if lt IE 9]>
<script src="/admin/plugins/html5/html5shiv.min.js"></script>
<script src="/admin/plugins/html5/respond.min.js"></script>
<![endif]-->
<!-- <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">  -->
<script id="sf-radio-template" type="text/x-jquery-tmpl">
<label class="radio-inline"> 
	<input type="radio" way-data="${inputName}" name="${inputName}" value="${code}" ${required} ${disabled}>${name}
</label>
</script>
<script id="sf-checkbox-template" type="text/x-jquery-tmpl">
<label class="checkbox-inline">
	<input type="checkbox" way-data="${inputName}" ${required} ${disabled}  name="${inputName}" value="${code}">${name}
</label>  
</script>
<script id="sf-select-template" type="text/x-jquery-tmpl">
<option value="${code}" ${disabled}>${name}</option>
</script>


 <style>
    .cropper-view-box,
    .cropper-face {
      border-radius: 50%;
    }
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini " >
	<div class="wrapper">
		<header class="main-header">
			<a href="#" class="logo"> <span class="logo-mini"><b><i class="fa fa-fw fa-desktop"></i></b></span>
				<span class="logo-lg"><i class="fa fa-fw fa-desktop"></i>    <b>开发平台</b></span>
			</a>
			<nav class="navbar navbar-static-top" role="navigation">
				<a href="#" class="sidebar-toggle" data-toggle="push-menu" id="push-menu"
					role="button"> <span class="sr-only">Toggle navigation</span>
				</a>
				<div class="navbar-custom-menu">
					<ul class="nav navbar-nav">
						<!-- User Account Menu -->
						<li class="dropdown user user-menu"><a href="#"
							class="dropdown-toggle" data-toggle="dropdown"> <img
								src="/admin/img/default.jpg" class="user-image user-photo"> <span class="hidden-xs" id="userName"></span>
						</a>
							<ul class="dropdown-menu">
								<li class="user-header"><img src="/admin/img/default.jpg"
									class="img-circle user-photo" >
									<p>
										<span id="loginName"></span>
										<small>上次登录时间:<font id="lastLoginTime"></font></small>
										<small>IP:<font id="lastLoginIp"></font></small>
									</p></li>
								<!-- Menu Footer-->
								<li class="user-footer">
									<div class="pull-left">
										<a href="#" id="user-center" class="btn btn-default btn-flat">个人中心</a>
									</div>
									<div class="pull-right">
										<a href="#" id="login-out" class="btn btn-default btn-flat">退出</a>
									</div>
								</li>
							</ul></li>
					</ul>
				</div>
			</nav>
		</header>
		<aside class="main-sidebar">
			<section class="sidebar">
				<ul class="sidebar-menu" data-widget="tree" id="left-menu">

				</ul>
			</section>
		</aside>
		
		<div class="content-wrapper" id="main-content">
			<!-- 单页 -->
			<iframe src="/admin/pages/main.html" name="main" width="100%" height="100%" id="single-page" style="display: none;"
				scrolling="auto" frameborder="0"></iframe>
			<!-- 多页签 -->
			<div id="layui-tab" class="layui-tab layui-tab-brief" style="margin: 0px;display: none;"  lay-allowClose="true" lay-filter="main">
				<ul class="layui-tab-title">
					 <li class="layui-this">首页</li>
				</ul>
				<div class="layui-tab-content">
					<div class="layui-tab-item layui-show">
						<iframe src='/admin/pages/main.html'  width='100%' height='100%' scrolling='auto' frameborder='0'></iframe>
   					</div>
				</div>
			</div>
		</div>
	
		<!-- 个人信息 -->
		<div class="row undisplay mg10" id="user-center-wrapper"
			way-scope="model.form.data">
			<div class="nav-tabs-custom">
				<ul class="nav nav-tabs" id="user-center-tabs">
					<li class="active"><a href="#tab_info" data-toggle="tab">个人信息</a></li>
					<li><a href="#tab_pwd" data-toggle="tab">修改密码</a></li>
					<li><a href="#tab_theme" data-toggle="tab">主题</a></li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="tab_info">
						<form class="form-horizontal" id="data-form">
							<div class="row">
								<div class="col-md-3">
									<p>
										<img src="" class="img-circle" way-data="photoFullUrl" way-default="/admin/img/default.jpg"
											alt="User Image" style="height: 128px; width: 128px;">
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<!-- <small class="text-red">100*100</small> -->
									</p>
									<p>
										<input type="hidden" name="photo" way-data="photo">
										&nbsp;&nbsp;&nbsp;<label for="userImageUpload"
											class="btn btn-default"><i class="fa fa-cloud-upload"></i>
											更换</label> <input type="file" name="file" id="userImageUpload"
											accept="image/*" style="display: none;">
									</p>
								</div>
								<div class="col-md-9">
									<div class="form-group">
										<label class="col-sm-2 control-label">部门</label>
										<div class="col-sm-5">
											<p class="form-control-static" way-data="deptName"></p>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-2 control-label">姓名<font
											class="text-red">*</font></label>
										<div class="col-sm-5">
											<input type="text" class="form-control" way-data="name"
												maxlength="50" minlength="1" name="name" required
												placeholder="">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-2 control-label">手机号</label>
										<div class="col-sm-5">
											<input type="text" class="form-control" way-data="mobile"
												maxlength="50" name="mobile" placeholder="">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-2 control-label">邮箱</label>
										<div class="col-sm-5">
											<input type="email" class="form-control" way-data="email"
												maxlength="50" name="email" placeholder="">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-2 control-label"></label>
										<div class="col-sm-5">
											<button type="submit" class="btn btn-primary">
												<i class="fa fa-save"></i> 保存
											</button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
					<div class="tab-pane" id="tab_pwd">
						<form class="form-horizontal" id="passoword-form">
							<div class="form-group">
								<label class="col-sm-2 control-label">原密码<font
											class="text-red">*</font></label>
								<div class="col-sm-5">
									<input type="password" class="form-control" 
										maxlength="100" minlength="6" name="oldPassword" placeholder="" required>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">新密码<font
											class="text-red">*</font></label>
								<div class="col-sm-5">
									<input type="password" class="form-control" way-data="password"
										maxlength="100" minlength="6" name="password" placeholder="" required>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">确认密码<font
											class="text-red">*</font></label>
								<div class="col-sm-5">
									<input type="password" class="form-control"
										way-data="conFirmPassword" maxlength="100" minlength="6"
										name="conFirmPassword" placeholder="" required>
								</div>
							</div>
							<div class="form-group">
										<label class="col-sm-2 control-label"></label>
										<div class="col-sm-5">
											<button type="submit" class="btn btn-primary">
												<i class="fa fa-save"></i> 保存
											</button>
										</div>
									</div>
						</form>
					</div>
					<div class="tab-pane" id="tab_theme">
						<div class="row">
	<div class="col-sm-10">
	<ul class="list-unstyled clearfix">
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-blue"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px; background: #367fa9"></span><span
									class="bg-light-blue"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222d32"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Blue</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-black"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div
								style="box-shadow: 0 0 2px rgba(0, 0, 0, 0.1)" class="clearfix">
								<span
									style="display: block; width: 20%; float: left; height: 7px; background: #fefefe"></span><span
									style="display: block; width: 80%; float: left; height: 7px; background: #fefefe"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Black</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-purple"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-purple-active"></span><span class="bg-purple"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222d32"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Purple</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-green"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-green-active"></span><span class="bg-green"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222d32"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Green</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-red"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-red-active"></span><span class="bg-red"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222d32"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Red</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-yellow"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-yellow-active"></span><span class="bg-yellow"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #222d32"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin">Yellow</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-blue-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px; background: #367fa9"></span><span
									class="bg-light-blue"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Blue
							Light</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-black-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div
								style="box-shadow: 0 0 2px rgba(0, 0, 0, 0.1)" class="clearfix">
								<span
									style="display: block; width: 20%; float: left; height: 7px; background: #fefefe"></span><span
									style="display: block; width: 80%; float: left; height: 7px; background: #fefefe"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Black
							Light</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-purple-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-purple-active"></span><span class="bg-purple"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Purple
							Light</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-green-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-green-active"></span><span class="bg-green"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Green
							Light</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-red-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-red-active"></span><span class="bg-red"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Red
							Light</p></li>
					<li style="float: left; width: 33.33333%; padding: 5px;"><a
						href="javascript:void(0)" data-skin="skin-yellow-light"
						style="display: block; box-shadow: 0 0 3px rgba(0, 0, 0, 0.4)"
						class="clearfix full-opacity-hover-null"><div>
								<span
									style="display: block; width: 20%; float: left; height: 7px;"
									class="bg-yellow-active"></span><span class="bg-yellow"
									style="display: block; width: 80%; float: left; height: 7px;"></span>
							</div>
							<div>
								<span
									style="display: block; width: 20%; float: left; height: 20px; background: #f9fafc"></span><span
									style="display: block; width: 80%; float: left; height: 20px; background: #f4f5f7"></span>
							</div></a>
						<p class="text-center no-margin" style="font-size: 12px">Yellow
							Light</p></li>
				</ul>
				</div>
				<div class="col-sm-2">
					<div class="checkbox icheck" title="刷新生效">
							<label> <input name="mutiPage" type="checkbox"
								value="1"> 多页签
							</label>
						</div>
				</div>
</div>
<script type="text/javascript">
$(function(){
	$("input[name='mutiPage']").iCheck({
		checkboxClass : 'icheckbox_square-blue',
		radioClass : 'iradio_square-blue',
		increaseArea : '20%' // optional
	});
	$("input[name='mutiPage']").on('ifClicked', function(event){
		if ($(this).is(":checked")){//即将取消
			localStorage.setItem("mutiPage", "0");
		} else {
			localStorage.setItem("mutiPage", "1");
		}
	});
	$("#push-menu").click(function(){
		 if ($("body").hasClass("sidebar-collapse")) {//准备展开
			 localStorage.setItem("sidebar-collapse", "0");
		 } else {
			 localStorage.setItem("sidebar-collapse", "1");
		 }
	 });
	$(window).on('load', function() {
	var sidebarCollapse = localStorage.getItem("sidebar-collapse");
	if ("1" == sidebarCollapse) {
		$("body").addClass("sidebar-collapse");
	} else {
		$("body").removeClass("sidebar-collapse");
	}
	if (localStorage.getItem("mutiPage") == '1') {
		$("input[name='mutiPage']").iCheck('check');
	}
});
})
/**
 * 换肤功能
 */
/**
 * List of all the available skins
 * 
 * @type Array
 */
var mySkins = [ 'skin-blue', 'skin-black', 'skin-red', 'skin-yellow',
		'skin-purple', 'skin-green', 'skin-blue-light', 'skin-black-light',
		'skin-red-light', 'skin-yellow-light', 'skin-purple-light',
		'skin-green-light' ]

/**
 * Get a prestored setting
 * 
 * @param String
 *            name Name of of the setting
 * @returns String The value of the setting | null
 */
function get(name) {
	if (typeof (Storage) !== 'undefined') {
		return localStorage.getItem(name)
	} else {
		window
				.alert('Please use a modern browser to properly view this template!')
	}
}

/**
 * Store a new settings in the browser
 * 
 * @param String
 *            name Name of the setting
 * @param String
 *            val Value of the setting
 * @returns void
 */
function store(name, val) {
	if (typeof (Storage) !== 'undefined') {
		localStorage.setItem(name, val)
	} else {
		window
				.alert('Please use a modern browser to properly view this template!')
	}
}


/**
 * Replaces the old skin with the new skin
 * 
 * @param String
 *            cls the new skin class
 * @returns Boolean false to prevent link's default action
 */
function changeSkin(cls) {
	$.each(mySkins, function(i) {
		$('body').removeClass(mySkins[i])
	})

	$('body').addClass(cls)
	store('skin', cls)
	return false
}

/**
 * Retrieve default settings and apply them to the template
 * 
 * @returns void
 */
function setup() {
	var tmp = get('skin')
	if (tmp && $.inArray(tmp, mySkins))
		changeSkin(tmp)

		// Add the change skin listener
	$('[data-skin]').on('click', function(e) {
		//if ($(this).hasClass('knob')) return
		e.preventDefault()
		changeSkin($(this).data('skin'))
	})
}
setup()


</script>
			
					</div>
				</div>
			</div>
		</div>
		<!-- Main Footer -->
		<footer class="main-footer">
			<div class="pull-right hidden-xs">让开发更简单</div>
			<strong>Copyright &copy; 2018 <a
				href="https://gitee.com/huangdf/seezoon-framework-all/">huangdf</a>.
			</strong> All rights reserved.
		</footer>
	</div>
	<!-- Bootstrap 3.3.7 -->
<script src="/admin/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- AdminLTE App -->
<script src="/admin/plugins/adminlte/js/adminlte.min.js"></script>
<!-- bootstrap table -->
<script src="/admin/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/admin/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
<!-- 加载效果 -->
<script src="/admin/plugins/pace-1.0.2/pace.min.js" ></script>
<!-- 弹出层 -->
<script src="/admin/plugins/layer-v3.0.3/layer.js"></script>
<script src="/admin/plugins//layui/layui.js"></script>

<!-- wayjs -->
<script src="/admin/plugins/wayjs/way.js"></script>
<!-- 单选复选框 -->
<script src="/admin/plugins/iCheck/icheck.min.js"></script>
<!-- 下拉 -->
<script src="/admin/plugins/bootstrap-select/js/bootstrap-select.js"></script>
<script src="/admin/plugins/bootstrap-select/js/i18n/defaults-zh_CN.min.js"></script>
<!-- 校验 -->
<script src="/admin/plugins/bootstrapvalidator/js/bootstrapValidator.min.js"></script>
<script src="/admin/plugins/bootstrapvalidator/js/language/zh_CN.js"></script>
<!-- 模板工具 -->
<script src="/admin/plugins/jquery-tmpl/jquery.tmpl.min.js"></script>
<!-- 时间选择器 -->
<script src="/admin/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/admin/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<!-- JSON 插件 -->
<script src="/admin/plugins/jquery-serialize-JSON/jquery.serializejson.min.js"></script>
<script src="/admin/js/lib/sf-bootstraptable.js"></script>
<!-- js 全局js -->
<script src="/admin/js/lib/sf-base.js"></script>
<!-- 工具 -->
<script src="/admin/js/lib/sf-utils.js"></script>



	<script src="/admin/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="/admin/plugins/jquery-file-upload/js/jquery.fileupload.js"></script>
<script src="/admin/plugins/jquery-file-upload/js/jquery.iframe-transport.js"></script>
<!-- 图片模板 -->
<script id="sf-image-template" type="text/x-jquery-tmpl">
	<div class="sf-file-wrapper" style="display: inline-block;">
		<input type="hidden" name="${inputName}" value="${path}">
		<img src="${url}" style="width: 128px;height: 128px;" title="${fileName}">
	 	<p><a href="javascript:void(0);" class="text-danger sf-file-delete">删除</a></p>
	</div>
</script>
<!-- 文件模板 -->
<script id="sf-file-template" type="text/x-jquery-tmpl">
	<div class="sf-file-wrapper">
		<input type="hidden" name="${inputName}" value="${path}">
	 	<p><a href="${url}" target="_blank">${fileName}</a> <a href="javascript:void(0);" class="text-danger sf-file-delete">删除</a></p>
	</div>
</script>
<!-- 查看单条图片模板 -->
<script id="sf-view-image-template" type="text/x-jquery-tmpl">
	<div class="sf-file-wrapper" style="display: inline-block;">
		<a href="${url}" target="_blank"><img src="${url}" style="width: 128px;height: 128px;" title="${fileName}"></a> 
	</div>
</script>
<!-- 查看单条文件模板 -->
<script id="sf-view-file-template" type="text/x-jquery-tmpl">
	<div class="sf-file-wrapper">
	 	<p><a href="${url}" target="_blank">${fileName}</a></p>
	</div>
</script>
<script type="text/javascript">
$(function(){
	 $("body").on("click",".sf-file-delete",function(){
		 $(this).parents(".sf-file-wrapper").remove();
	 });
})
</script>



	<script type="text/javascript">
(function($) {       
	/*
	需要圆角效果页面手动引入
	<style>
    .cropper-view-box,
    .cropper-face {
      border-radius: 50%;
    }
  </style> 
  调用方式
  $("#userImageUpload").sfCrop(callback,{});
  
  https://github.com/fengyuanchen/cropperjs
  */
	$("head").append("<link rel='stylesheet' href='/admin/plugins/cropperjs/cropper.min.css'>");
	function getRoundedCanvas(sourceCanvas) {
        var canvas = document.createElement('canvas');
        var context = canvas.getContext('2d');
        var width = sourceCanvas.width;
        var height = sourceCanvas.height;

        canvas.width = width;
        canvas.height = height;

        context.imageSmoothingEnabled = true;
        context.drawImage(sourceCanvas, 0, 0, width, height);
        context.globalCompositeOperation = 'destination-in';
        context.beginPath();
        context.arc(width / 2, height / 2, Math.min(width, height) / 2, 0, 2 * Math.PI, true);
        context.fill();
        return canvas;
      }
	$.fn.sfCrop = function(callback,options) {  
		var cropper;
		var croppable = false;
		var defaults =  {
		          aspectRatio: 1,
		          viewMode: 1,
		          ready: function () {
		            croppable = true;
		          },
		       }; 
		var opts = $.extend(defaults, options);   
		$('#sf-crop-modal').on('shown.bs.modal', function (e) {
			var image = document.getElementById('sf-image-to-crop');
			if (cropper) {
				cropper.destroy();
			}
			cropper = new Cropper(image, opts);
		})
		$(this).change(function(e){
			var $this = $(this);
		 	var files = e.target.files;
	        var done = function (url) {
	        		$("#sf-image-to-crop").attr("src",url);
	        		$("#sf-crop-modal").modal("show");
	        		//清空，不然选择同张图不触发change事件
	        		$this.val('');
	        };
	        var reader;
	        var file;
	        var url;
	        if (files && files.length > 0) {
	          file = files[0];
	          if (URL) {
	            done(URL.createObjectURL(file));
	          } else if (FileReader) {
	            reader = new FileReader();
	            reader.onload = function (e) {
	              done(reader.result);
	            };
	            reader.readAsDataURL(file);
	          }
	        }
	 	});
		$("#sf-crop").click(function(){
			  var croppedCanvas;
	          var roundedCanvas;
	          if (!croppable) {
	            return;
	          }
	          // Crop
	          croppedCanvas = cropper.getCroppedCanvas();
	          // Round 不裁剪成圆的
	          //roundedCanvas = getRoundedCanvas(croppedCanvas);
	          // Show
	          $.post(adminContextPath + "/file/uploadBase64.do",{base64File:croppedCanvas.toDataURL()},function(respone){
		        	  	if (respone.responeCode == '0') {
		        	  		callback(respone.data);
		        	  		$("#sf-crop-modal").modal('toggle');
		        	  	}
	          });
		});
	};     
})(jQuery);   
</script>
<script src="/admin/plugins/cropperjs/cropper.min.js"></script>
 <div class="modal fade" id="sf-crop-modal" style="z-index: 999999999">
      <div class="modal-dialog" >
        <div class="modal-content">
	          <div class="modal-header">
	            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	              <span aria-hidden="true">&times;</span>
	            </button>
	            <h4 class="modal-title"><i class="fa  fa-crop"></i> 裁剪</h4>
	          </div>
	          <div class="modal-body">
	            <div class="img-container">
	              <img id="sf-image-to-crop" src="" style="width: 100%;height: 100%;">
	            </div>
	          </div>
	          <div class="modal-footer">
	            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	            <button type="button" class="btn btn-primary" id="sf-crop">裁剪</button>
	          </div>
        </div>
</div>


	<script src="/admin/js/index.js"></script>
</body>
</html>